{%extends 'base.html'%} 
{% load static %} 
{%block content%}

<div class="dropbox">
    <h3>Forecasting</h3>
    <form>

        <div class="flex-container">
            <div>
                <label for="device" style="float:left">Select Device:</label><br>
                <select name="imei" id="imei" style="width: 250px;float: left;">
        {%if location%}
        <option value={{imei}}>{{location}}</option>
        {%else%}
        <option value="sd">--Select Device--</option>
        {%endif%}
        {% for i in devices %}
        <option value={{i.DeviceImei}}>{{i.location}}</option>
        {% endfor %}
      </select>
            </div>
            <div>

                <label for="package" style="float:left">Select Packet Type:</label><br>
                <select name="packettype" id="packettype" style="width: 250px;float: left;">
                  {%if pack%}
                  <option value={{pack}}>{{pack}}</option>
                  {%else%}
        <option value="pt">--Select Packet Type--</option>
        {%endif%}
      </select>
            </div>
            <div>
                <label for="parameter" style="float:left">Select Parameter:</label><br>
                <select name="parameter" id="parameter" style="width: 250px;float: left;">
                  {%if aid%}
                  <option value={{aid}}>{{aid}}</option>
                  {%else%}
        <option value="pr">--Select Parameter--</option>
        {%endif%}
      </select>
            </div>
            <div>
                <br>
                <button type="submit" value="Submit" id="abc" onclick="myFunction()" style="float:left;" class="button"><i class="fa fa-search" aria-hidden="true"></i> Submit</button>
                
            </div>
        </div>

    </form>
    {{graph_div2|safe}}
    {{graph_div1|safe}}
   

</div>

<script type="text/javascript">
  function myFunction(){
    imei=document.getElementById('imei');
    pack=document.getElementById('packettype');
    aid=document.getElementById('parameter');
    var imeival = imei.options[imei.selectedIndex].value;
    var packval = pack.options[pack.selectedIndex].value;
    var aidval = aid.options[aid.selectedIndex].value;
    if(imeival=="sd" || packval=="pt" || aidval=="pr"){
      alert("Please Enter all the  fields");
      var link = document.getElementById("abc");
      link.setAttribute("href", "/forecasting");

    }
    else{
      var link = document.getElementById("abc");
      link.setAttribute("href", "/forecasting?imei="+imeival+"&pack="+packval+"&aid="+aidval);

    }

    }
    

</script>

<script>
    var subjectObject = {
      "current_voltage": ["VL1","VL2","VL3","IL1","IL2","IL3","VL12","VL23","VL31"],
      "overview": ["OTI","ATI"],
      "Total_Power":["KWH"]
    }
    window.onload = function() {
        var topicSel = document.getElementById("packettype");
        var chapterSel = document.getElementById("parameter");
        for (var x in subjectObject) {
            topicSel.options[topicSel.options.length] = new Option(x, x);
        }
        topicSel.onchange = function() {
        //empty Chapters- and Topics- dropdowns
        chapterSel.length = 1;
        //display correct values
        var z = subjectObject[topicSel.value];
        for (var i = 0; i < z.length; i++) {
          chapterSel.options[chapterSel.options.length] = new Option(z[i], z[i]);
        }
      }
    }
</script>


{% endblock %}